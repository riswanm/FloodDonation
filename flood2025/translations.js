// Translations for English and Tamil
const translations = {
  en: {
    headerTitle: "Thalduwa Flood Relief 2025",
    headerSubtitle: "Organized by Jawhariyya Mosque Thalduwa Avissawella",
    headerLocation: "Thalduwa, Avissawella, Sri Lanka",
    donateNow: "Donate Now",
    droneFootageTitle: "Witness The Devastation",
    droneFootageSubtitle: "Aerial view of the flood-affected areas",
    heroTitle: "Your Support Changes Lives",
    heroMessage: "Your compassion has the power to transform lives. Together, we can bring hope, restore homes, and rebuild dreams for families devastated by the floods.",
    reliefProgressTitle: "Relief Progress",
    reliefProgressSubtitle: "Tracking our multi-phase relief and recovery efforts",
    timelineTitle: "Our Journey of Relief & Recovery",
    affectedAreasTitle: "Areas Affected by Floods",
    quickDonationTitle: "Quick Donation",
    bankAccountTitle: "Bank Account Details",
    contactPersonsTitle: "Contact Persons",
    bank: "Bank:",
    accountNumber: "Account Number:",
    accountName: "Account Name:",
    branch: "Branch:",
    president: "President",
    secretary: "Secretary",
    footerText1: "© 2025 Jawhariyya Mosque Thalduwa Avissawella",
    footerText2: "All donations serve all communities regardless of religion or ethnicity",
    footerAttribution: "Images from Unsplash",
    modalTitle: "Make Your Donation",
    modalAccountLabel: "Transfer to Bank Account:",
    modalInstructions: "Please transfer the amount to the above account. If you cannot transfer now, we will contact you to collect your donation.",
    whatsappNotice: "After transferring, please share the payment slip via WhatsApp to one of our contacts:",
    yourName: "Your Name",
    enterName: "Enter your name",
    phoneNumber: "Phone Number",
    enterPhone: "Enter your phone number",
    donationAmount: "Donation Amount (LKR)",
    enterAmount: "Enter amount",
    confirmDonation: "Confirm Donation",
    thankYouTitle: "Thank You for Your Generosity!",
    thankYouMessage: "May Allah bless you abundantly for your kindness and compassion towards those in need.",
    thankYouSubmessage: "Your donation will bring hope and relief to families affected by the floods.",
    whatsappNoticeConfirm: "Please share your payment slip via WhatsApp to one of our contacts:",
    closeButton: "Close"
  },
  ta: {
    headerTitle: "தல்துவ வெள்ள நிவாரணம் 2025",
    headerSubtitle: "ஜவ்ஹாரிய்யா பள்ளிவாசல் தல்துவ அவிசாவெல்ல ஏற்பாடு",
    headerLocation: "தல்துவ, அவிசாவெல்ல, இலங்கை",
    donateNow: "நன்கொடை வழங்கவும்",
    droneFootageTitle: "பேரழிவைக் காணுங்கள்",
    droneFootageSubtitle: "வெள்ளத்தால் பாதிக்கப்பட்ட பகுதிகளின் வான்வழிக் காட்சி",
    heroTitle: "உங்கள் ஆதரவு வாழ்க்கையை மாற்றுகிறது",
    heroMessage: "உங்கள் இரக்கம் வாழ்க்கையை மாற்றும் சக்தி கொண்டது. ஒன்றாக இணைந்து, வெள்ளத்தால் பாதிக்கப்பட்ட குடும்பங்களுக்கு நம்பிக்கையை அளிக்கலாம், வீடுகளை மீட்டெடுக்கலாம், கனவுகளை மீண்டும் கட்டியெழுப்பலாம்.",
    reliefProgressTitle: "நிவாரண முன்னேற்றம்",
    reliefProgressSubtitle: "பல கட்ட நிவாரணம் மற்றும் மீட்பு முயற்சிகளின் முன்னேற்றத்தை கண்காணித்தல்",
    timelineTitle: "நிவாரணம் & மீட்பின் பயணம்",
    affectedAreasTitle: "வெள்ளத்தால் பாதிக்கப்பட்ட பகுதிகள்",
    quickDonationTitle: "விரைவு நன்கொடை",
    bankAccountTitle: "வங்கிக் கணக்கு விவரங்கள்",
    contactPersonsTitle: "தொடர்பு நபர்கள்",
    bank: "வங்கி:",
    accountNumber: "கணக்கு எண்:",
    accountName: "கணக்கு பெயர்:",
    branch: "கிளை:",
    president: "தலைவர்",
    secretary: "செயலாளர்",
    footerText1: "© 2025 ஜவ்ஹாரிய்யா பள்ளிவாசல் தல்துவ அவிசாவெல்ல",
    footerText2: "அனைத்து நன்கொடைகளும் மதம் அல்லது இனம் பாராமல் அனைத்து சமூகங்களுக்கும் சேவை செய்கின்றன",
    footerAttribution: "படங்கள் Unsplash இலிருந்து",
    modalTitle: "உங்கள் நன்கொடையை வழங்கவும்",
    modalAccountLabel: "வங்கிக் கணக்கிற்கு மாற்றவும்:",
    modalInstructions: "மேற்கண்ட கணக்கிற்கு தொகையை மாற்றவும். இப்போது மாற்ற முடியாவிட்டால், உங்கள் நன்கொடையை சேகரிக்க நாங்கள் உங்களைத் தொடர்பு கொள்வோம்.",
    whatsappNotice: "பணம் மாற்றிய பிறகு, எங்கள் தொடர்பு நபர்களில் ஒருவருக்கு வாட்ஸ்அப் வழியாக பணம் செலுத்திய ரசீதை பகிரவும்:",
    yourName: "உங்கள் பெயர்",
    enterName: "உங்கள் பெயரை உள்ளிடவும்",
    phoneNumber: "தொலைபேசி எண்",
    enterPhone: "உங்கள் தொலைபேசி எண்ணை உள்ளிடவும்",
    donationAmount: "நன்கொடை தொகை (LKR)",
    enterAmount: "தொகையை உள்ளிடவும்",
    confirmDonation: "நன்கொடையை உறுதிப்படுத்தவும்",
    thankYouTitle: "உங்கள் தாராள மனதிற்கு நன்றி!",
    thankYouMessage: "தேவைப்படுபவர்களிடம் உங்கள் கருணை மற்றும் இரக்கத்திற்காக அல்லாஹ் உங்களுக்கு ஏராளமாக ஆசீர்வதிப்பானாக.",
    thankYouSubmessage: "உங்கள் நன்கொடை வெள்ளத்தால் பாதிக்கப்பட்ட குடும்பங்களுக்கு நம்பிக்கையையும் நிவாரணத்தையும் கொண்டு வரும்.",
    whatsappNoticeConfirm: "எங்கள் தொடர்பு நபர்களில் ஒருவருக்கு வாட்ஸ்அப் வழியாக உங்கள் பணம் செலுத்திய ரசீதை பகிரவும்:",
    closeButton: "மூடு"
  }
};

// Current language
let currentLanguage = 'en';

// Get translation
function t(key) {
  return translations[currentLanguage][key] || translations.en[key] || key;
}

// Switch language
function switchLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('preferredLanguage', lang);
  updatePageContent();
}

// Update all text content on the page
function updatePageContent() {
  // Update HTML lang attribute
  document.documentElement.lang = currentLanguage;
  
  // Header
  document.querySelector('.header-title').textContent = t('headerTitle');
  document.querySelector('.header-subtitle').textContent = t('headerSubtitle');
  document.querySelector('.header-location').textContent = t('headerLocation');
  document.querySelector('#headerDonateBtn .btn-text').textContent = t('donateNow');
  
  // Drone footage section
  const droneSection = document.querySelector('.drone-footage .section-title');
  if (droneSection) droneSection.textContent = t('droneFootageTitle');
  const droneSubtitle = document.querySelector('.drone-footage .section-subtitle');
  if (droneSubtitle) droneSubtitle.textContent = t('droneFootageSubtitle');
  
  // Hero section
  document.querySelector('.impact-title').textContent = t('heroTitle');
  document.querySelector('.impact-hero-text').textContent = t('heroMessage');

  // Section titles/subtitles (target by section to avoid index/order bugs)
  const reliefProgressTitle = document.querySelector('.relief-progress .section-title');
  if (reliefProgressTitle) reliefProgressTitle.textContent = t('reliefProgressTitle');
  const reliefProgressSubtitle = document.querySelector('.relief-progress .section-subtitle');
  if (reliefProgressSubtitle) reliefProgressSubtitle.textContent = t('reliefProgressSubtitle');

  const timelineTitle = document.querySelector('.timeline-section .section-title');
  if (timelineTitle) timelineTitle.textContent = t('timelineTitle');

  const affectedAreasTitle = document.querySelector('.affected-areas .section-title');
  if (affectedAreasTitle) affectedAreasTitle.textContent = t('affectedAreasTitle');

  const donationTitle = document.querySelector('.donation-tiers .section-title');
  if (donationTitle) donationTitle.textContent = t('quickDonationTitle');

  const contactSectionTitles = document.querySelectorAll('.contact-details .section-title');
  if (contactSectionTitles.length >= 1) contactSectionTitles[0].textContent = t('bankAccountTitle');
  if (contactSectionTitles.length >= 2) contactSectionTitles[1].textContent = t('contactPersonsTitle');
  
  // Bank account labels
  document.querySelectorAll('.account-label')[0].textContent = t('bank');
  document.querySelectorAll('.account-label')[1].textContent = t('accountNumber');
  document.querySelectorAll('.account-label')[2].textContent = t('accountName');
  document.querySelectorAll('.account-label')[3].textContent = t('branch');
  
  // Footer
  const footerTexts = document.querySelectorAll('.footer-text');
  footerTexts[0].textContent = t('footerText1');
  footerTexts[1].textContent = t('footerText2');
  document.querySelector('.footer-attribution').textContent = t('footerAttribution');
  
  // Modal
  document.querySelector('.modal-title').textContent = t('modalTitle');
  document.querySelector('.modal-account-label').textContent = t('modalAccountLabel');
  document.querySelector('.modal-instructions').textContent = t('modalInstructions');
  const modalWhatsappNotice = document.querySelector('.modal-account-info + .modal-whatsapp-notice');
  if (modalWhatsappNotice) modalWhatsappNotice.innerHTML = `<strong>${t('whatsappNotice')}</strong>`;
  
  // Form labels
  document.querySelector('label[for="donorName"]').textContent = t('yourName');
  document.querySelector('#donorName').placeholder = t('enterName');
  document.querySelector('label[for="donorPhone"]').textContent = t('phoneNumber');
  document.querySelector('#donorPhone').placeholder = t('enterPhone');
  document.querySelector('label[for="donationAmount"]').textContent = t('donationAmount');
  document.querySelector('#donationAmount').placeholder = t('enterAmount');
  document.querySelector('.btn-submit').textContent = t('confirmDonation');
  
  // Thank you modal
  document.querySelector('.thank-you-title').textContent = t('thankYouTitle');
  document.querySelector('.thank-you-message').textContent = t('thankYouMessage');
  document.querySelector('.thank-you-submessage').textContent = t('thankYouSubmessage');
  const thankYouWhatsapp = document.querySelector('.thank-you-content .modal-whatsapp-notice');
  if (thankYouWhatsapp) thankYouWhatsapp.innerHTML = `<strong>${t('whatsappNoticeConfirm')}</strong>`;
  document.querySelector('.btn-thank-you-close').textContent = t('closeButton');
  
  // Update language toggle button text
  const langBtn = document.getElementById('langToggle');
  if (langBtn) {
    langBtn.textContent = currentLanguage === 'en' ? 'தமிழ்' : 'English';
  }
}

// Initialize language from localStorage or default to English
function initLanguage() {
  const savedLang = localStorage.getItem('preferredLanguage');
  if (savedLang && translations[savedLang]) {
    currentLanguage = savedLang;
  }
  updatePageContent();
}
