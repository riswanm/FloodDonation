// ===========================================
// TRANSLATIONS - ENGLISH & TAMIL
// ===========================================

const TRANSLATIONS = {
    en: {
        // Header
        header: {
            mosqueTitle: "Jawhariyya Jumma Masjid Thalduwa – Avissawella",
            projectTitle: "Mosque Renovation and Maintenance Project - Ramadan 2026",
            sadaqahJariyah: "Continuous Charity (Sadaqah Jariyah)"
        },
        
        // Quote
        quote: {
            text: "Whoever builds a mosque for Allah, Allah will build for him a house in Paradise.",
            source: "Prophet Muhammad (ﷺ) - Sahih Bukhari"
        },
        
        // Stats Section
        stats: {
            targetAmount: "Total Required",
            collectedAmount: "Amount Collected",
            remainingAmount: "Remaining",
            totalShares: "Total Shares",
            sharesIssued: "Shares Issued",
            sharesAvailable: "Available Shares"
        },
        
        // Sections
        sections: {
            collectionProgress: "Collection Progress",
            sponsorshipShares: "Sponsorship Shares",
            sharesSubtitle: "Each share represents Rs. 5,000 contribution. Click on a share to sponsor or view details.",
            available: "Available",
            issued: "Issued",
            aboutProject: "About This Project",
            howToDonate: "How to Donate",
            donateSubtitle: "Make a direct bank transfer or contact us via WhatsApp/Email to sponsor one or more shares.",
            bankTransferDetails: "Bank Transfer Details",
            loading: "Loading...",
            shareProgress: "Share Progress"
        },
        
        // Project Info
        projectInfo: {
            description: "Help us renovate and upgrade our beloved mosque facilities in preparation for the blessed month of Ramadan 2026. Your generous contribution will help maintain the house of Allah and provide better amenities for worshippers.",
            objectives: [
                "Prayer hall renovation and carpet replacement",
                "Air conditioning and ventilation installation",
                "General maintenance and repairs"
            ]
        },
        
        // Bank Details
        bank: {
            bankName: "Bank Name",
            accountName: "Account Name",
            accountNumber: "Account Number",
            branch: "Branch"
        },
        
        // Contact
        contact: {
            whatsapp: "Contact via WhatsApp",
            email: "Send Email",
            whatsappText: "I want to donate for Mosque Maintenance Fund",
            emailSubject: "Mosque Maintenance Fund Donation"
        },
        
        // Modal - Issued Share
        modal: {
            shareIssued: "Share Issued",
            shareSponsored: "This share has been generously sponsored.",
            mayAllahReward: "May Allah reward them abundantly.",
            close: "Close",
            bookYourShares: "Book Your Shares",
            startingFrom: "Starting from",
            perShare: "per share",
            shares: "share(s)"
        },
        
        // Form
        form: {
            yourName: "Your Name",
            phoneNumber: "Phone Number",
            numberOfShares: "Number of Shares",
            namePlaceholder: "Enter your full name",
            phonePlaceholder: "e.g., 077 123 4567",
            sharesPlaceholder: "Enter number of shares",
            total: "Total",
            contactNote: "Our committee will contact you to arrange payment. You can also deposit directly and share the slip via WhatsApp.",
            submitRequest: "Submit Request",
            cancel: "Cancel",
            submitting: "Submitting...",
            fillAllFields: "Please fill in all required fields."
        },
        
        // Success Message
        success: {
            requestSubmitted: "Request Submitted!",
            jazakAllah: "JazakAllah Khair",
            requestFor: "Your request for {shares} share(s)",
            hasBeenNoted: "has been noted.",
            committeeWillContact: "Our committee will contact you soon at:",
            depositNote: "You can also deposit directly and share the payment slip via WhatsApp:",
            openWhatsApp: "Open WhatsApp",
            whatsappMessage: "I would like to sponsor {shares} share(s) for the Mosque Maintenance Fund."
        }
    },
    
    ta: {
        // Header
        header: {
            mosqueTitle: "ஜவ்ஹாரிய்யா ஜும்ஆ மஸ்ஜித் தல்துவ – அவிஸ்ஸாவெல்ல",
            projectTitle: "மசூதி புதுப்பித்தல் மற்றும் பராமரிப்பு திட்டம் - ரமழான் 2026",
            sadaqahJariyah: "தொடர் தர்மம் (ஸதகா ஜாரியா)"
        },
        
        // Quote
        quote: {
            text: "அல்லாஹ்வுக்காக ஒரு மஸ்ஜிதை கட்டுபவருக்கு, அல்லாஹ் சுவர்க்கத்தில் ஒரு வீட்டைக் கட்டுவான்.",
            source: "நபி முஹம்மது (ஸல்) - ஸஹீஹ் புகாரி"
        },
        
        // Stats Section
        stats: {
            targetAmount: "மொத்த தேவை",
            collectedAmount: "சேகரிக்கப்பட்ட தொகை",
            remainingAmount: "மீதமுள்ளது",
            totalShares: "மொத்த பங்குகள்",
            sharesIssued: "வழங்கப்பட்ட பங்குகள்",
            sharesAvailable: "கிடைக்கக்கூடிய பங்குகள்"
        },
        
        // Sections
        sections: {
            collectionProgress: "சேகரிப்பு முன்னேற்றம்",
            sponsorshipShares: "ஸ்பான்சர்ஷிப் பங்குகள்",
            sharesSubtitle: "ஒவ்வொரு பங்கும் ரூ. 5,000 பங்களிப்பைக் குறிக்கிறது. ஸ்பான்சர் செய்ய அல்லது விவரங்களைப் பார்க்க ஒரு பங்கின் மீது கிளிக் செய்யவும்.",
            available: "கிடைக்கக்கூடியது",
            issued: "வழங்கப்பட்டது",
            aboutProject: "இந்த திட்டம் பற்றி",
            howToDonate: "நன்கொடை செய்வது எப்படி",
            donateSubtitle: "நேரடி வங்கி பரிமாற்றம் செய்யவும் அல்லது ஒன்று அல்லது அதற்கு மேற்பட்ட பங்குகளை ஸ்பான்சர் செய்ய வாட்ஸ்அப்/மின்னஞ்சல் வழியாக எங்களை தொடர்பு கொள்ளவும்.",
            bankTransferDetails: "வங்கி பரிமாற்ற விவரங்கள்",
            loading: "ஏற்றுகிறது...",
            shareProgress: "முன்னேற்றத்தைப் பகிரவும்"
        },
        
        // Project Info
        projectInfo: {
            description: "2026 ரமழான் மாதத்திற்கான தயாரிப்பில் எங்கள் அன்பான மசூதி வசதிகளை புதுப்பிக்கவும் மேம்படுத்தவும் எங்களுக்கு உதவுங்கள். உங்கள் தாராளமான பங்களிப்பு அல்லாஹ்வின் வீட்டை பராமரிக்கவும் வணங்குபவர்களுக்கு சிறந்த வசதிகளை வழங்கவும் உதவும்.",
            objectives: [
                "தொழுகை அரங்கத்தின் புதுப்பித்தல் மற்றும் கம்பள மாற்றீடு",
                "ஏர் கண்டிஷனிங் மற்றும் காற்றோட்ட நிறுவல்",
                "பொது பராமரிப்பு மற்றும் பழுதுபார்ப்புகள்"
            ]
        },
        
        // Bank Details
        bank: {
            bankName: "வங்கி பெயர்",
            accountName: "கணக்கு பெயர்",
            accountNumber: "கணக்கு எண்",
            branch: "கிளை"
        },
        
        // Contact
        contact: {
            whatsapp: "வாட்ஸ்அப் வழியாக தொடர்பு கொள்ளவும்",
            email: "மின்னஞ்சல் அனுப்பவும்",
            whatsappText: "நான் மசூதி பராமரிப்பு நிதிக்கு நன்கொடை வழங்க விரும்புகிறேன்",
            emailSubject: "மசூதி பராமரிப்பு நிதி நன்கொடை"
        },
        
        // Modal - Issued Share
        modal: {
            shareIssued: "பங்கு வழங்கப்பட்டது",
            shareSponsored: "இந்த பங்கு தாராளமாக ஸ்பான்சர் செய்யப்பட்டுள்ளது.",
            mayAllahReward: "அல்லாஹ் அவர்களுக்கு ஏராளமான வெகுமதி அளிப்பானாக.",
            close: "மூடு",
            bookYourShares: "உங்கள் பங்குகளை முன்பதிவு செய்யுங்கள்",
            startingFrom: "தொடங்கி",
            perShare: "ஒரு பங்குக்கு",
            shares: "பங்கு(கள்)"
        },
        
        // Form
        form: {
            yourName: "உங்கள் பெயர்",
            phoneNumber: "தொலைபேசி எண்",
            numberOfShares: "பங்குகளின் எண்ணிக்கை",
            namePlaceholder: "உங்கள் முழு பெயரை உள்ளிடவும்",
            phonePlaceholder: "எ.கா., 077 123 4567",
            sharesPlaceholder: "பங்குகளின் எண்ணிக்கையை உள்ளிடவும்",
            total: "மொத்தம்",
            contactNote: "எங்கள் குழு கட்டணத்தை ஏற்பாடு செய்ய விரைவில் உங்களை தொடர்பு கொள்ளும். நீங்கள் நேரடியாக டெபாசிட் செய்து ஸ்லிப்பை வாட்ஸ்அப் வழியாகவும் பகிரலாம்.",
            submitRequest: "கோரிக்கையை சமர்ப்பிக்கவும்",
            cancel: "ரத்து",
            submitting: "சமர்ப்பிக்கிறது...",
            fillAllFields: "அனைத்து தேவையான புலங்களையும் நிரப்பவும்."
        },
        
        // Success Message
        success: {
            requestSubmitted: "கோரிக்கை சமர்ப்பிக்கப்பட்டது!",
            jazakAllah: "ஜஸாக்கல்லாஹ் கைர்",
            requestFor: "உங்கள் கோரிக்கை {shares} பங்கு(கள்)",
            hasBeenNoted: "குறிப்பிடப்பட்டுள்ளது.",
            committeeWillContact: "எங்கள் குழு விரைவில் உங்களை தொடர்பு கொள்ளும்:",
            depositNote: "நீங்கள் நேரடியாக டெபாசிட் செய்து கட்டண ஸ்லிப்பை வாட்ஸ்அப் வழியாகவும் பகிரலாம்:",
            openWhatsApp: "வாட்ஸ்அப்பை திறக்கவும்",
            whatsappMessage: "நான் மசூதி பராமரிப்பு நிதிக்கு {shares} பங்கு(கள்) ஸ்பான்சர் செய்ய விரும்புகிறேன்."
        }
    }
};

// Default language
let currentLanguage = 'en';

/**
 * Get translation for a key (supports nested keys like 'header.mosqueTitle')
 */
function t(key) {
    const keys = key.split('.');
    let value = TRANSLATIONS[currentLanguage];
    
    for (const k of keys) {
        if (value && typeof value === 'object') {
            value = value[k];
        } else {
            // Fallback to English
            value = TRANSLATIONS['en'];
            for (const k2 of keys) {
                if (value && typeof value === 'object') {
                    value = value[k2];
                } else {
                    return key; // Return key if not found
                }
            }
            return value || key;
        }
    }
    
    return value || key;
}

/**
 * Get translated objectives array
 */
function getObjectives(lang) {
    const language = lang || currentLanguage;
    return TRANSLATIONS[language]?.projectInfo?.objectives || TRANSLATIONS['en'].projectInfo.objectives;
}

/**
 * Switch language
 */
function switchLanguage(lang) {
    if (TRANSLATIONS[lang]) {
        currentLanguage = lang;
        localStorage.setItem('preferredLanguage', lang);
        // Reload all content with new language
        if (typeof renderAllContent === 'function') {
            renderAllContent();
        }
        if (typeof updateActiveLanguageButton === 'function') {
            updateActiveLanguageButton();
        }
    }
}

/**
 * Get saved language preference
 */
function getPreferredLanguage() {
    return localStorage.getItem('preferredLanguage') || 'en';
}

// Initialize language on load
currentLanguage = getPreferredLanguage();